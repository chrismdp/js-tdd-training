<script type='text/javascript' src='http://sukima.github.com/jasmine-all/jasmine-all-min.js'></script>
<script>
  function Hero(name, location, energy) {
    this._name = name;
    this._location = location;
    this._energy = energy;
    this._allowedPaths = [];

    this.name = function() { return this._name; };
    this.walkTo = function(destination) {
      if (this._allow) {
        this._location = destination;
        this._energy -= 25;
      }
    };
    this.location = function() { return this._location };
    this.energy = function() { return this._energy; };
    this.allowWalking = function(from, to, energy) {
      this._allow = true;
    };
  }

  describe("A hero", function() {
    it ("has a name", function() {
      hero = new Hero("Jane");
      expect(hero.name()).toBe("Jane");
      hero = new Hero("Bob");
      expect(hero.name()).toBe("Bob");
    });

    it ("can walk between locations", function() {
      hero = new Hero("Jane", "Launch pad");
      hero.allowWalking("Launch pad", "Spaceship");
      hero.walkTo("Spaceship");
      expect(hero.location()).toBe("Spaceship");
    });

    // NOTE: This test has a coverage issue: what if
    // we have a different route in play?
    it ("cannot walk unless a route exists", function() {
      hero = new Hero("Jane", "Launch pad");
      hero.walkTo("Spaceship");
      expect(hero.location()).toBe("Launch pad");
    });

    it ("can walk back again", function() {
      hero = new Hero("Jane", "Launch pad");
      hero.allowWalking("Launch pad", "Spaceship");
      hero.walkTo("Spaceship");
      expect(hero.location()).toBe("Spaceship");
      hero.walkTo("Launch pad");
      expect(hero.location()).toBe("Launch pad");
    });

    it ("expends energy whilst walking", function() {
      hero = new Hero("Jane", "Launch pad", 100);
      hero.allowWalking("Launch pad", "Spaceship", 25);
      hero.walkTo("Spaceship");
      expect(hero.energy()).toBe(75);
    });

    xit ("expends different energy per route", function() {
      hero = new Hero("Jane", "Launch pad", 100);
      hero.allowWalking("Launch pad", "Main base", 30);
      hero.walkTo("Spaceship");
      expect(hero.location()).toBe("Launch pad");
      hero.walkTo("Main base");
      expect(hero.energy()).toBe(70);
    });
  });

</script>
